"0",""
"0","fuel <- as.data.frame(data[2]) %>%"
"0","  mutate(fuel_type = ""Petrol"") %>%"
"0","  rbind(as.data.frame(data[2]) %>%"
"0","          mutate(fuel_type = ""Diesel"")) %>%"
"0","  clean_names() %>%"
"0","  pivot_longer(!c(date, fuel_type), names_to = ""country"", values_to = ""value"") %>%"
"0","  mutate(country = toupper(country)) %>%"
"0","  left_join(country_codes %>% "
"0","              select(`alpha-2`, name) %>%"
"0","              rename(country = `alpha-2`))"
"0",""
"0","eu_mean <- fuel %>%"
"0","  group_by(date, fuel_type) %>%"
"0","  summarise(""value"" = mean(value)) %>%"
"0","  mutate(country = ""00"","
"0","         name = ""EU average"")"
"0",""
"0",""
"0","fuel2 <- fuel %>%"
"0","  rbind(eu_mean) %>%"
"0","  mutate(colour = case_when(name == ""EU average"" ~ ""#00aeef"","
"0","                            name == ""Netherlands"" ~ ""#45b049"","
"0","                            name == ""Germany"" ~ ""#7bb57d"","
"0","                            name == ""Bulgaria"" ~""#7bb57d"","
"0","                            TRUE ~ ""black"")) %>%"
"0","  mutate(alpha = ifelse(colour != ""black"", 1, 0.9),"
"0","         date = as.Date(date)) "
"0",""
"0",""
"0",""
"0","fuels <- ggplot(fuel2, "
"0","       aes(x = date,"
"0","           y = value,"
"0","           group = country,"
"0","           colour = colour,"
"0","           alpha = alpha,"
"0","           label = colour)) +"
"0","  te_style() +"
"0","  geom_line(size = 1.2) +"
"0","  geom_text(aes(label = ifelse(date == max(date) & colour != ""black"", name, NA)), hjust = 0, nudge_x = 0.5, size = 7) +"
"0","  scale_x_date(breaks = ""6 months"", labels = date_format(""%b\n%Y"")) +"
"0","  scale_y_continuous(breaks = seq(0.8, 2.2, by = 0.2)) +"
"0","  scale_color_identity() +"
"0","  # scale_alpha() +"
"0","  theme(legend.position = ""none"","
"0","        panel.spacing = unit(4, ""lines""),"
"0","        plot.margin = unit(c(1, 4, 1, 0), ""lines"")) +"
"0","  labs(title = ""Consumer price of petrol and diesel on the rise"","
"0","       subtitle = ""Real price with taxes (â‚¬/L), EU countries"","
"0","       x = """","
"0","       y = """") +"
"0","  facet_wrap(~ fuel_type) +"
"0","  coord_cartesian(clip = 'off')"
"0",""
"0","finalise_plot(plot_name = fuels,"
"0","source = ""Source: European Commission Weekly Oil Bulletin"","
"0","save_filepath = ""fuels.png"","
"0","width_pixels = 850,"
"0","height_pixels = 550"
"0",")"
